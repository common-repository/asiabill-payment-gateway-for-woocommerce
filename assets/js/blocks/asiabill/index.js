!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.htmlEntities},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wc.wcBlocksRegistry},function(e,t){e.exports=window.wc.wcSettings},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(2),c=n(3),o=n(1),i=n(4);const s=Object(i.getSetting)("wc_asiabill_creditcard_data",{}),l=Object(r.__)("AsiaBill Payments","wc_asiabill"),d=Object(o.decodeEntities)(s.title)||l,u=e=>{const{components:t}=e,{PaymentMethodIcons:n}=t,r=b();return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"wc-block-gateway-container wc-inline-card-element"},Object(a.createElement)("p",null," ",Object(o.decodeEntities)(s.description||"")," "),Object(a.createElement)(m,e)),n&&r.length&&Object(a.createElement)(n,{icons:r,align:"left"}))},m=({billing:e,eventRegistration:t,emitResponse:n,components:r})=>{if("2"===s.checkout_model)return"";{const[c,o]=Object(a.useState)(""),{ValidationInputError:i}=r;if(""===s.token||null===s.token)return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(i,{errorMessage:"Unable to load page, please check your settings"}));const l=window.AsiabillPay(s.token);window.addEventListener("getErrorMessage",e=>{o(e.detail.errorMessage)}),Object(a.useEffect)(()=>{document.getElementById("asiabill-card-element")&&l.elementInit("payment_steps",{formId:"asiabill-card",formWrapperId:"asiabill-card-element",frameId:"asiabill-card-frame",customerId:"",autoValidate:!1,layout:s.layout}).catch(e=>{o(e),console.log(e)})},[]);const{onPaymentSetup:d}=t;return Object(a.useEffect)(()=>{const t=d(async()=>{try{const t=await l.confirmPaymentMethod({apikey:s.token,trnxDetail:{billingDetail:p(e),card:{cardNo:"",cardExpireMonth:"",cardExpireYear:"",cardSecurityCode:"",issuingBank:""},customerId:""}});return"0"===t.data.code?{type:n.responseTypes.SUCCESS,meta:{paymentMethodData:{asiabill_payment:t.data.data.customerPaymentMethodId}}}:{type:n.responseTypes.ERROR,message:t.data.message}}catch(e){return{type:n.responseTypes.ERROR,message:e.message}}});return()=>{t()}},[d,e.billingData,n.noticeContexts.PAYMENTS,n.responseTypes.ERROR,n.responseTypes.SUCCESS]),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{id:"asiabill-card",className:"wc-asiabill-elements-field"},Object(a.createElement)("div",{id:"asiabill-card-element",className:"ab-elemen"})),Object(a.createElement)(i,{errorMessage:c}))}},p=e=>{const t=e.billingData;return{address:{city:t.city,country:t.country,line1:t.address_1,line2:t.address_2,postalCode:t.postcode,state:t.state},email:t.email,lastName:t.last_name,firstName:t.first_name,phone:t.phone}},b=()=>Object.entries(s.icons).map(([e,{src:t,alt:n}])=>({id:e,src:t,alt:n})),f={name:"wc_asiabill_creditcard",label:Object(a.createElement)(e=>{const{PaymentMethodLabel:t}=e.components;return Object(a.createElement)(t,{text:d})},null),content:Object(a.createElement)(u,null),edit:Object(a.createElement)(u,null),icons:b(),canMakePayment:()=>!0,ariaLabel:d,supports:{showSavedCards:!1,showSaveOption:!1,features:s.supports},paymentMethodId:"wc_asiabill_creditcard"};Object(c.registerPaymentMethod)(f)}]);